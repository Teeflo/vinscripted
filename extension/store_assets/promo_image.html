<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Générateur Image Promo Vinscripted</title>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #e0e0e0;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
            margin: 0;
        }

        h1 {
            margin-bottom: 20px;
            color: #333;
        }

        canvas {
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1);
            background: white;
            max-width: 100%;
            height: auto;
        }

        .controls {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }

        button {
            padding: 10px 20px;
            background: #09B1BA;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.2s;
        }

        button:hover {
            background: #079aa3;
        }

        .fonts-hidden {
            font-family: 'Inter';
            opacity: 0;
            position: absolute;
            pointer-events: none;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>

<body>
    <div class="fonts-hidden">Load Font</div>
    <h1>Image Promotionnelle (1400 x 560)</h1>
    <canvas id="promoCanvas" width="1400" height="560"></canvas>

    <div class="controls">
        <button onclick="draw()">Redessiner</button>
        <button onclick="downloadImage()">Télécharger PNG</button>
    </div>

    <script>
        const canvas = document.getElementById('promoCanvas');
        const ctx = canvas.getContext('2d');

        // Load images
        const img1 = new Image();
        img1.src = "Capture d'écran 2026-02-04 165024.png";

        const img2 = new Image();
        img2.src = "Capture d'écran 2026-02-04 165922.png";

        const logo = new Image();
        logo.src = "../icons/icon128.png"; // Assuming this exists, based on prompt using icon48.png in popup. fallback handled.

        let imagesLoaded = 0;
        const totalImages = 2; // Not counting logo for critical path if it doesn't exist

        function onImageLoad() {
            imagesLoaded++;
            if (imagesLoaded >= totalImages) {
                // Determine layout trigger
                setTimeout(draw, 500); // Give fonts time to load
            }
        }

        img1.onload = onImageLoad;
        img2.onload = onImageLoad;

        // Fallback if images fail (e.g. user renamed them or I got path wrong)
        img1.onerror = () => { console.error("Img1 missing"); onImageLoad(); };
        img2.onerror = () => { console.error("Img2 missing"); onImageLoad(); };

        function roundedImage(x, y, width, height, radius) {
            ctx.beginPath();
            ctx.moveTo(x + radius, y);
            ctx.lineTo(x + width - radius, y);
            ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
            ctx.lineTo(x + width, y + height - radius);
            ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
            ctx.lineTo(x + radius, y + height);
            ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
            ctx.lineTo(x, y + radius);
            ctx.quadraticCurveTo(x, y, x + radius, y);
            ctx.closePath();
        }

        function draw() {
            // Background - Gradient Vinted-ish
            const gradient = ctx.createLinearGradient(0, 0, 1400, 560);
            gradient.addColorStop(0, '#09B1BA'); // Vinted Teal
            gradient.addColorStop(1, '#10D2DC'); // Lighter Teal

            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 1400, 560);

            // Abstract Decor Shapes
            ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.beginPath();
            ctx.arc(1300, 50, 300, 0, Math.PI * 2);
            ctx.fill();

            ctx.beginPath();
            ctx.arc(100, 500, 200, 0, Math.PI * 2);
            ctx.fill();

            // Text content
            ctx.shadowColor = 'rgba(0,0,0,0.2)';
            ctx.shadowBlur = 10;
            ctx.shadowOffsetX = 2;
            ctx.shadowOffsetY = 4;

            ctx.fillStyle = '#FFFFFF';
            ctx.textAlign = 'left';

            // Title
            ctx.font = '800 80px "Inter", sans-serif';
            ctx.fillText('Vinscripted', 80, 200);

            // Subtitle
            ctx.font = '600 36px "Inter", sans-serif';
            ctx.fillText('Automatisez vos descriptions Vinted', 80, 260);

            // Draw Screenshots with "Phone" or "Window" look
            // We'll place them on the right side

            ctx.shadowColor = 'rgba(0,0,0,0.3)';
            ctx.shadowBlur = 30;
            ctx.shadowOffsetX = 10;
            ctx.shadowOffsetY = 20;

            // Image 1 (Back)
            if (img1.complete && img1.naturalWidth > 0) {
                const w = 600;
                const h = (img1.naturalHeight / img1.naturalWidth) * w;
                const x = 750;
                const y = 100;

                ctx.save();
                // Rotate slightly
                ctx.translate(x + w / 2, y + h / 2);
                ctx.rotate(-0.05); // radians
                ctx.translate(-(x + w / 2), -(y + h / 2));

                roundedImage(x, y, w, h, 20);
                ctx.clip();
                ctx.drawImage(img1, x, y, w, h);
                ctx.restore();

                // Border for Img 1
                ctx.save();
                ctx.translate(x + w / 2, y + h / 2);
                ctx.rotate(-0.05);
                ctx.translate(-(x + w / 2), -(y + h / 2));
                ctx.lineWidth = 10;
                ctx.strokeStyle = 'rgba(255,255,255,0.2)';
                roundedImage(x, y, w, h, 20);
                ctx.stroke();
                ctx.restore();
            }

            // Image 2 (Front) - Overlapping
            if (img2.complete && img2.naturalWidth > 0) {
                const w = 500;
                const h = (img2.naturalHeight / img2.naturalWidth) * w;
                const x = 550;
                const y = 200; // Lower down

                ctx.save();
                // Rotate slightly other way? No, maybe consistent
                ctx.translate(x + w / 2, y + h / 2);
                ctx.rotate(0.02);
                ctx.translate(-(x + w / 2), -(y + h / 2));

                roundedImage(x, y, w, h, 20);
                ctx.clip();
                ctx.drawImage(img2, x, y, w, h);
                ctx.restore();

                // Border for Img 2
                ctx.save();
                ctx.translate(x + w / 2, y + h / 2);
                ctx.rotate(0.02);
                ctx.translate(-(x + w / 2), -(y + h / 2));
                ctx.lineWidth = 8;
                ctx.strokeStyle = 'white';
                roundedImage(x, y, w, h, 20);
                ctx.stroke();
                ctx.restore();
            }
        }

        function downloadImage() {
            const link = document.createElement('a');
            link.download = 'promo_vinscripted_1400x560.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        // Initial draw attempt
        window.onload = function () {
            // Small delay to ensure fonts loaded
            setTimeout(draw, 500);
        };
    </script>
</body>

</html>